# ============================================================
# üî¥ ALPHA PPO v2 - LIVE CONFIG (FINAL)
# Competition / Leaderboard / Demo-Real Ready
# ============================================================

meta:
  name: "Alpha PPO v2 LIVE"
  version: "2.0-final"
  created: "2026-01-19"
  mode: "live"
  author: "Cayon AI Trading Lab"

# ============================================================
# üß† ALPHA PPO ENGINE
# ============================================================
alpha:
  version: v2
  model_path: models/alpha_ppo_v2_live.zip
  fallback:
    enabled: true
    model_path: models/alpha_ppo_v1.zip
  mode:
    default: hybrid        # shadow | hybrid | full
    min_confidence: 0.55
    full_override_conf: 0.70
  safety:
    auto_disable:
      daily_dd: 8.0        # auto revert to shadow if DD > 8%
      max_consecutive_loss: 3
  logging:
    enable: true
    file: logs/alpha_v2_decisions.csv

# ============================================================
# üõ°Ô∏è GUARDIAN GOVERNANCE (FINAL AUTHORITY)
# ============================================================
guardian:
  daily_drawdown:
    limit: 14.0            # competition aggressive
    hard_latch: true
  kill_switch:
    max_dd: 10.0
    max_errors: 3
  margin:
    min_free_margin_pct: 5.0
    buffer: 1.10
  escalation:
    max_blocks: 3
    freeze_minutes: 5
  logging:
    file: logs/guardian_metrics.csv

# ============================================================
# üéõÔ∏è COMPETITION AUTO-TUNER
# ============================================================
auto_tuner:
  enabled: true
  adapt_window_trades: 20
  dd_pressure:
    soften_rr_below_dd: 6.0
    tighten_guard_above_dd: 9.0
  rr_range:
    min: 1.6
    max: 2.6

# ============================================================
# üéØ TRADE EXECUTION (TP / SL)
# ============================================================
execution:
  entry:
    source: alpha          # alpha / rule / hybrid
  stop_loss:
    source: ai
    atr_multiplier: 1.6
    max_sl_pips: 350       # safe for XAUUSD
  take_profit:
    source: ai
    rr_min: 1.6
    rr_max: 2.6
  trailing:
    enabled: true
    break_even_rr: 1.4
    trail_start_rr: 2.0
    atr_multiplier: 1.2

# ============================================================
# üí∞ RISK MANAGEMENT
# ============================================================
risk:
  per_trade_risk_pct: 2.0
  max_positions: 6
  daily_loss_limit_pct: 14.0
  position_scaling:
    reduce_above_dd: 7.0
    scale_factor: 0.7

# ============================================================
# üìä SHADOW & ANALYTICS
# ============================================================
shadow:
  enabled: true
  compare_with: rule
  metrics:
    track_dd_avoided: true
    track_freeze_cost: true
    track_missed_profit: true

# ============================================================
# üìà DASHBOARD / EXPORT
# ============================================================
dashboard:
  realtime: true
  socket_port: 8765
  export:
    auto_png: true
    path: reports/figures
    interval_minutes: 30

# ============================================================
# üîÅ RETRAIN / ONLINE LEARNING
# ============================================================
retrain:
  enabled: true
  min_trades: 5
  window_days: 7
  auto_deploy: false       # manual promote only

# ============================================================
# üß™ CHAOS / FAULT TOLERANCE
# ============================================================
chaos:
  enable_detection: true
  max_latency_sec: 2.0
  on_error:
    action: force_hold

# ============================================================
# ‚úÖ SYSTEM FLAGS
# ============================================================
flags:
  allow_live_trade: true
  require_guardian_pass: true
  log_every_decision: true
